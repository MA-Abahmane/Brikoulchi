<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/logo.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Brikoulchi - Find Local Services</title>

    <!-- SEO Meta Tags -->
    <meta name="description" content="Brikoulchi - Your trusted platform for finding local services. Connect with skilled professionals for home services, repairs, personal care, and more." />
    <meta name="keywords" content="local services, home services, professional services, service providers, handyman, repairs, maintenance" />
    <meta name="author" content="Brikoulchi" />
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Brikoulchi - Find Local Services" />
    <meta property="og:description" content="Connect with trusted local service providers in your area for all your needs" />
    <meta property="og:image" content="/logo.jpg" />
    <meta property="og:url" content="https://brikoulchi.com" />
    <meta property="og:type" content="website" />
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Brikoulchi - Find Local Services" />
    <meta name="twitter:description" content="Connect with trusted local service providers in your area for all your needs" />
    <meta name="twitter:image" content="/logo.jpg" />
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://brikoulchi.com" />
    
    <!-- Mobile Meta Tags -->
    <meta name="theme-color" content="#3B5BFF" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: {
                DEFAULT: 'var(--primary-color)',
                dark: 'var(--primary-dark)'
              },
              secondary: {
                DEFAULT: 'var(--secondary-color)',
                dark: 'var(--secondary-dark)'
              }
            },
            fontFamily: {
              inter: ['Inter', 'sans-serif'],
            }
          }
        }
      }
    </script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />


  </head>
  <body class="font-inter">

    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>

    <script id="google-translate-script">
        // Google Translate integration
                function loadGoogleTranslate() {
            if (window.google && google.translate) {
            new google.translate.TranslateElement({ pageLanguage: 'en' }, 'google_translate_element');
            }
        }
        
        function translateLanguage(lang) {
            const select = document.querySelector(".goog-te-combo");
            if (select) {
            select.value = lang;
            select.dispatchEvent(new Event("change"));
            setTimeout(() => {
                const banner = document.querySelector('iframe.goog-te-banner-frame');
                if (banner) bafnner.remove();
                document.body.style.top = '0px';
                document.documentElement.style.marginTop = '0px';
            }, 500);
            }
        }
        
        document.addEventListener("DOMContentLoaded", () => {
            // Inject Google Translate root
            const hiddenDiv = document.createElement('div');
            hiddenDiv.id = 'google_translate_element';
            hiddenDiv.style.display = 'none';
            document.body.appendChild(hiddenDiv);
        
            // Inject custom dropdown
            const customDropdown = document.createElement('div');
            customDropdown.id = 'custom_translate';
            customDropdown.style.cssText = 'position: fixed; bottom: 40px; right: 20px; z-index: 9999;';
            customDropdown.innerHTML = `
                <style>
                
                .lang-wrapper {
                    position: fixed;
                    bottom: 20px;
                    right: 20px;
                    z-index: 9999;
                    font-family: sans-serif;
                    user-select: none;
                }

                .lang-pill {
                    width: 130px;
                    padding: 8px 16px;
                    display: inline-block;
                    align-items: center;
                    justify-content: space-evenly;
                    cursor: pointer;
                    font-weight: bold;
                    overflow: hidden;
                    border: none;
                    border-radius: 50px;
                    background: #f0f0f0;
                    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
                    transition: width 0.4s ease , background 0.3s;
                    white-space: nowrap;
                }

                .lang-list {
                    margin-top: 8px;
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
                    padding: 8px 0;
                    display: none;
                    flex-direction: column;
                    overflow: hidden;
                    animation: fadeIn 0.3s ease-in-out;
                    transition: width 1.4s ease-in-out;
                }

                .lang-list.show {
                    display: flex;
                }

                .lang-item {
                    padding: 10px 20px;
                    cursor: pointer;
                    transition: background 0.2s;
                    display: flex;
                    align-items: center;

                }

                .lang-item:hover {
                    background: #eee;
                }

                @keyframes fadeIn {
                    from { opacity: 0; transform: scale(0.95); }
                    to { opacity: 1; transform: scale(1); }
                }

                #langToggle {
                    color: #3B5BFF;
                }
                </style>

                <div class="lang-wrapper">
                    <div class="lang-list" id="langList">
                        <div class="lang-item" data-lang="en"><img src="/flags/en.png" width="20px">&nbsp English</div>
                        <div class="lang-item" data-lang="es"><img src="/flags/es.png" width="20px">&nbsp Spanish</div>
                        <div class="lang-item" data-lang="fr"><img src="/flags/fr.png" width="20px">&nbsp French</div>
                        <div class="lang-item" data-lang="ar"><img src="/flags/ar.png" width="20px">&nbsp Arabic</div>
                    </div>
                    <div class="lang-pill" id="langToggle">üåê&nbspEnglish</div>
                </div>
            `;

            document.body.appendChild(customDropdown);
        
            // Inject Google Translate script
            const gScript = document.createElement('script');
            gScript.src = 'https://translate.google.com/translate_a/element.js?cb=loadGoogleTranslate';
            document.body.appendChild(gScript);
        
            // Optional: remove top frame artifacts
            const style = document.createElement('style');
            style.innerHTML = `
            body > .skiptranslate, .goog-te-banner-frame {
                display: none !important;
                height: 0 !important;
            }
            html {
                margin-top: 0px !important;
            }
            `;
            document.head.appendChild(style);

            const langToggle = document.getElementById("langToggle");
        const langList = document.getElementById("langList");

        langToggle.addEventListener("mouseenter", () => {
            langList.classList.add("show");
        });

        langToggle.addEventListener("mouseleave", () => {
            setTimeout(() => {
            if (!langList.matches(":hover")) langList.classList.remove("show");
            }, 300);
        });

        langList.addEventListener("mouseleave", () => {
            langList.classList.remove("show");
        });

        document.querySelectorAll(".lang-item").forEach(item => {
            item.addEventListener("click", () => {
            const lang = item.getAttribute("data-lang");
            const label = item.textContent;
            translateLanguage(lang);
            langToggle.textContent = `üåê \n ${label}`;
            langList.classList.remove("show");
            });
        });
        });
  
    </script>
    


    <!-- Puter.js CDN -->
    <script src="https://js.puter.com/v2/"></script>
    <!-- BRIKOULCHI Ai Chat Bot -->
    <script>
      // Inject CSS and HTML for Brikoulchi AI Chatbot
      (function() {
        // Inject CSS
        const style = document.createElement('style');
        style.textContent = `
          /* Modern AI Chatbot Widget Styles */
          .brikoulchi-chatbot {
            position: fixed;
            bottom: 24px;
            right: 24px;
            z-index: 9998;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Inter', sans-serif;
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --primary-color: #667eea;
            --primary-dark: #5a67d8;
            --surface-color: #ffffff;
            --surface-elevated: #f8fafc;
            --text-primary: #1a202c;
            --text-secondary: #718096;
            --text-muted: #a0aec0;
            --border-color: #e2e8f0;
            --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-xl: 20px;
          }

          .brikoulchi-chat-toggle {
            position: fixed;
            bottom: 26px;
            right: 160px;
            background: var(--primary-gradient);
            color: white;
            border: none;
            border-radius: 50%;
            width: 39px;
            height: 39px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow-lg);
            transition: all 0.7s ease-in-out;
            font-size: 18px;
            backdrop-filter: blur(10px);
            z-index: 9998;
            overflow: hidden;
          }

          .brikoulchi-chat-toggle::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0.05) 100%);
            border-radius: inherit;
            transition: opacity 0.8s ease;
            opacity: 0;
          }

          .brikoulchi-chat-toggle:hover {
            transform: translateY(-4px) scale(1.05);
            box-shadow: var(--shadow-xl);
          }

          .brikoulchi-chat-toggle:hover::before {
            opacity: 1;
          }

          .brikoulchi-chat-toggle.active {
            background: var(--primary-dark);
            transform: rotate(360deg);
          }

          .brikoulchi-chat-window {
            position: absolute;
            bottom: 80px;
            right: 0;
            width: 400px;
            height: 600px;
            background: var(--surface-color);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-xl);
            display: none;
            flex-direction: column;
            overflow: hidden;
            border: 1px solid var(--border-color);
            backdrop-filter: blur(20px);
            transform-origin: bottom right;
          }

          .brikoulchi-chat-window.open {
            display: flex;
            animation: chatWindowOpen 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
          }

          @keyframes chatWindowOpen {
            0% { opacity: 0; transform: scale(0.8) translateY(20px); }
            100% { opacity: 1; transform: scale(1) translateY(0); }
          }

          .brikoulchi-chat-header {
            background: var(--primary-gradient);
            color: white;
            padding: 20px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            overflow: hidden;
          }

          .brikoulchi-chat-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
          }

          .brikoulchi-chat-header-content {
            position: relative;
            z-index: 1;
            display: flex;
            align-items: center;
            gap: 12px;
          }

          .brikoulchi-ai-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            backdrop-filter: blur(10px);
          }

          .brikoulchi-chat-title-group h3 {
            margin: 0;
            font-size: 18px;
            font-weight: 600;
            line-height: 1.2;
          }

          .brikoulchi-chat-subtitle {
            margin: 0;
            font-size: 13px;
            opacity: 0.9;
            font-weight: 400;
          }

          .brikoulchi-close-btn {
            position: relative;
            z-index: 1;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            backdrop-filter: blur(10px);
          }

          .brikoulchi-close-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
          }

          .brikoulchi-chat-messages {
            flex: 1;
            padding: 24px;
            overflow-y: auto;
            background: linear-gradient(to bottom, var(--surface-color) 0%, var(--surface-elevated) 100%);
            scroll-behavior: smooth;
          }

          .brikoulchi-chat-messages::-webkit-scrollbar {
            width: 4px;
          }

          .brikoulchi-chat-messages::-webkit-scrollbar-track {
            background: transparent;
          }

          .brikoulchi-chat-messages::-webkit-scrollbar-thumb {
            background: var(--text-muted);
            border-radius: 2px;
          }

          .brikoulchi-message {
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
            animation: messageSlideIn 0.3s ease-out;
          }

          @keyframes messageSlideIn {
            0% { opacity: 0; transform: translateY(10px); }
            100% { opacity: 1; transform: translateY(0); }
          }

          .brikoulchi-message.user {
            align-items: flex-end;
          }

          .brikoulchi-message.assistant {
            align-items: flex-start;
          }

          .brikoulchi-message-content {
            display: flex;
            align-items: flex-end;
            gap: 8px;
            max-width: 85%;
          }

          .brikoulchi-message.user .brikoulchi-message-content {
            flex-direction: row-reverse;
          }

          .brikoulchi-message-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            flex-shrink: 0;
          }

          .brikoulchi-message.assistant .brikoulchi-message-avatar {
            background: var(--primary-gradient);
            color: white;
          }

          .brikoulchi-message.user .brikoulchi-message-avatar {
            background: var(--text-secondary);
            color: white;
          }

          .brikoulchi-message-bubble {
            padding: 12px 16px;
            border-radius: var(--radius-lg);
            font-size: 14px;
            line-height: 1.5;
            word-wrap: break-word;
            position: relative;
            max-width: 100%;
          }

          .brikoulchi-message.assistant .brikoulchi-message-bubble {
            background: var(--surface-color);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-sm);
            border-bottom-left-radius: 4px;
          }

          .brikoulchi-message.user .brikoulchi-message-bubble {
            background: var(--primary-gradient);
            color: white;
            border-bottom-right-radius: 4px;
            box-shadow: var(--shadow-sm);
          }

          .brikoulchi-message-time {
            font-size: 11px;
            color: var(--text-muted);
            margin-top: 4px;
            padding: 0 8px;
          }

          .brikoulchi-typing-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 16px;
            background: var(--surface-color);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            border-bottom-left-radius: 4px;
            box-shadow: var(--shadow-sm);
            max-width: 85%;
          }

          .brikoulchi-typing-text {
            color: var(--text-secondary);
            font-size: 14px;
            font-style: italic;
          }

          .brikoulchi-typing-dots {
            display: flex;
            gap: 4px;
          }

          .brikoulchi-typing-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--primary-color);
            animation: typingDot 1.4s infinite ease-in-out;
          }

          .brikoulchi-typing-dot:nth-child(1) { animation-delay: -0.32s; }
          .brikoulchi-typing-dot:nth-child(2) { animation-delay: -0.16s; }

          @keyframes typingDot {
            0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
            40% { transform: scale(1); opacity: 1; }
          }

          .brikoulchi-chat-toggle-container {
            padding: 20px 24px;
            background: var(--surface-color);
            border-top: 1px solid var(--border-color);
            display: flex;
            gap: 12px;
            align-items: flex-end;
          }

          .brikoulchi-input-wrapper {
            flex: 1;
            position: relative;
          }

          .brikoulchi-chat-input {
            width: 100%;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 12px 16px;
            font-size: 14px;
            resize: none;
            max-height: 120px;
            min-height: 44px;
            outline: none;
            transition: all 0.2s ease;
            background: var(--surface-elevated);
            color: var(--text-primary);
            font-family: inherit;
            line-height: 1.5;
          }

          .brikoulchi-chat-input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            background: var(--surface-color);
          }

          .brikoulchi-chat-input::placeholder {
            color: var(--text-muted);
          }

          .brikoulchi-send-btn {
            background: var(--primary-gradient);
            color: white;
            border: none;
            border-radius: 50%;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            flex-shrink: 0;
            box-shadow: var(--shadow-sm);
          }

          .brikoulchi-send-btn:hover:not(:disabled) {
            transform: scale(1.05);
            box-shadow: var(--shadow-md);
          }

          .brikoulchi-send-btn:active {
            transform: scale(0.95);
          }

          .brikoulchi-send-btn:disabled {
            background: var(--text-muted);
            cursor: not-allowed;
            transform: none;
            opacity: 0.6;
          }

          .brikoulchi-send-icon {
            width: 18px;
            height: 18px;
            transition: transform 0.2s ease;
          }

          .brikoulchi-send-btn:hover:not(:disabled) .brikoulchi-send-icon {
            transform: translateX(1px);
          }

          .brikoulchi-welcome-message {
            text-align: center;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 16px 20px;
            border-radius: var(--radius-lg);
            margin-bottom: 20px;
            box-shadow: var(--shadow-md);
          }

          .brikoulchi-welcome-title {
            font-size: 16px;
            font-weight: 600;
            margin: 0 0 8px 0;
          }

          .brikoulchi-welcome-subtitle {
            font-size: 13px;
            margin: 0;
            opacity: 0.9;
          }

          @media (max-width: 768px) {
            .brikoulchi-chatbot {
              bottom: 20px;
              right: 20px;
            }

            .brikoulchi-chat-toggle {
              width: 56px;
              height: 56px;
              font-size: 20px;
            }

            .brikoulchi-chat-window {
              width: calc(100vw - 40px);
              height: calc(100vh - 120px);
              max-height: 600px;
              bottom: 76px;
              right: 0;
            }

            .brikoulchi-chat-header {
              padding: 16px 20px;
            }

            .brikoulchi-ai-avatar {
              width: 36px;
              height: 36px;
              font-size: 16px;
            }

            .brikoulchi-chat-title-group h3 {
              font-size: 16px;
            }

            .brikoulchi-chat-messages {
              padding: 20px;
            }

            .brikoulchi-chat-toggle-container {
              padding: 16px 20px;
            }
          }

          @media (max-width: 480px) {
            .brikoulchi-chatbot {
              bottom: 16px;
              right: 16px;
            }

            .brikoulchi-chat-toggle {
              width: 52px;
              height: 52px;
              font-size: 18px;
            }

            .brikoulchi-chat-window {
              width: calc(100vw - 32px);
              height: calc(100vh - 100px);
              bottom: 68px;
            }
          }

          @media (prefers-color-scheme: dark) {
            .brikoulchi-chatbot {
              --surface-color: #1a202c;
              --surface-elevated: #2d3748;
              --text-primary: #f7fafc;
              --text-secondary: #e2e8f0;
              --text-muted: #a0aec0;
              --border-color: #4a5568;
            }
          }

          @media (prefers-reduced-motion: reduce) {
            .brikoulchi-chat-toggle,
            .brikoulchi-chat-window,
            .brikoulchi-message,
            .brikoulchi-send-btn {
              animation: none;
              transition: none;
            }
          }

          .brikoulchi-chat-toggle:focus-visible,
          .brikoulchi-close-btn:focus-visible,
          .brikoulchi-send-btn:focus-visible {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
          }

          .brikoulchi-chat-input:focus-visible {
            outline: none;
          }
        `;
        document.head.appendChild(style);

        // Inject HTML
        const chatbotDiv = document.createElement('div');
        chatbotDiv.className = 'brikoulchi-chatbot';
        chatbotDiv.innerHTML = `
          <button class="brikoulchi-chat-toggle" id="brikoulchi-chat-toggle" aria-label="Open AI Assistant">
            ü§ñ
          </button>
          
          <div class="brikoulchi-chat-window" id="brikoulchi-chat-window" role="dialog" aria-labelledby="chat-title">
            <div class="brikoulchi-chat-header">
              <div class="brikoulchi-chat-header-content">
                <div class="brikoulchi-ai-avatar">üß†</div>
                <div class="brikoulchi-chat-title-group">
                  <h3 id="chat-title">Brikoulchi AI</h3>
                  <p class="brikoulchi-chat-subtitle">Intelligent Assistant</p>
                </div>
              </div>
              <button class="brikoulchi-close-btn" id="brikoulchi-chat-close" aria-label="Close chat">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="18" y1="6" x2="6" y2="18"></line>
                  <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
              </button>
            </div>
            
            <div class="brikoulchi-chat-messages" id="brikoulchi-chat-messages" role="log" aria-live="polite">
              <!-- Messages will be added here -->
            </div>
            
            <div class="brikoulchi-chat-toggle-container">
              <div class="brikoulchi-input-wrapper">
                <textarea 
                  class="brikoulchi-chat-input" 
                  id="brikoulchi-chat-input" 
                  placeholder="Ask me anything about Brikoulchi..."
                  rows="1"
                  aria-label="Type your message"
                ></textarea>
              </div>
              <button class="brikoulchi-send-btn" id="brikoulchi-send-btn" aria-label="Send message">
                <svg class="brikoulchi-send-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="22" y1="2" x2="11" y2="13"></line>
                  <polygon points="22,2 15,22 11,13 2,9"></polygon>
                </svg>
              </button>
            </div>
          </div>
        `;
        document.body.appendChild(chatbotDiv);

        // JavaScript for Brikoulchi AI Chatbot
        class BrikoulchiAIChatbot {
          constructor() {
            this.isOpen = false;
            this.messages = [];
            this.isTyping = false;
            
            this.initializeElements();
            this.bindEvents();
            this.addWelcomeMessage();
          }

          initializeElements() {
            this.toggleBtn = document.getElementById('brikoulchi-chat-toggle');
            this.chatWindow = document.getElementById('brikoulchi-chat-window');
            this.closeBtn = document.getElementById('brikoulchi-chat-close');
            this.messagesContainer = document.getElementById('brikoulchi-chat-messages');
            this.chatInput = document.getElementById('brikoulchi-chat-input');
            this.sendBtn = document.getElementById('brikoulchi-send-btn');
          }

          bindEvents() {
            this.toggleBtn.addEventListener('click', () => this.toggleChat());
            this.closeBtn.addEventListener('click', () => this.closeChat());
            this.sendBtn.addEventListener('click', () => this.sendMessage());
            
            this.chatInput.addEventListener('keydown', (e) => {
              if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                this.sendMessage();
              }
            });

            this.chatInput.addEventListener('input', () => {
              this.adjustTextareaHeight();
              this.updateSendButton();
            });

            document.addEventListener('keydown', (e) => {
              if (e.key === 'Escape' && this.isOpen) {
                this.closeChat();
              }
            });
          }

          toggleChat() {
            if (this.isOpen) {
              this.closeChat();
            } else {
              this.openChat();
            }
          }

          openChat() {
            this.isOpen = true;
            this.chatWindow.classList.add('open');
            this.toggleBtn.classList.add('active');
            this.chatInput.focus();
            this.chatWindow.setAttribute('aria-hidden', 'false');
          }

          closeChat() {
            this.isOpen = false;
            this.chatWindow.classList.remove('open');
            this.toggleBtn.classList.remove('active');
            this.chatWindow.setAttribute('aria-hidden', 'true');
          }

          adjustTextareaHeight() {
            this.chatInput.style.height = 'auto';
            const scrollHeight = this.chatInput.scrollHeight;
            const maxHeight = 120;
            this.chatInput.style.height = Math.min(scrollHeight, maxHeight) + 'px';
          }

          updateSendButton() {
            const hasText = this.chatInput.value.trim().length > 0;
            this.sendBtn.disabled = !hasText || this.isTyping;
          }

          addMessage(content, isUser = false) {
            const message = {
              content,
              isUser,
              timestamp: new Date()
            };
            
            this.messages.push(message);
            this.renderMessage(message);
            this.scrollToBottom();
          }

          renderMessage(message) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `brikoulchi-message ${message.isUser ? 'user' : 'assistant'}`;
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'brikoulchi-message-content';
            
            const avatarDiv = document.createElement('div');
            avatarDiv.className = 'brikoulchi-message-avatar';
            avatarDiv.textContent = message.isUser ? 'üë§' : 'ü§ñ';
            
            const bubbleDiv = document.createElement('div');
            bubbleDiv.className = 'brikoulchi-message-bubble';
            bubbleDiv.textContent = message.content;
            
            const timeDiv = document.createElement('div');
            timeDiv.className = 'brikoulchi-message-time';
            timeDiv.textContent = this.formatTime(message.timestamp);
            
            contentDiv.appendChild(avatarDiv);
            contentDiv.appendChild(bubbleDiv);
            messageDiv.appendChild(contentDiv);
            messageDiv.appendChild(timeDiv);
            
            this.messagesContainer.appendChild(messageDiv);
          }

          formatTime(timestamp) {
            return timestamp.toLocaleTimeString('en-US', { 
              hour: 'numeric', 
              minute: '2-digit',
              hour12: true 
            });
          }

          showTyping() {
            if (this.isTyping) return;
            
            this.isTyping = true;
            const typingDiv = document.createElement('div');
            typingDiv.className = 'brikoulchi-message assistant';
            typingDiv.id = 'typing-indicator';
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'brikoulchi-message-content';
            
            const avatarDiv = document.createElement('div');
            avatarDiv.className = 'brikoulchi-message-avatar';
            avatarDiv.textContent = 'ü§ñ';
            
            const typingIndicator = document.createElement('div');
            typingIndicator.className = 'brikoulchi-typing-indicator';
            
            typingIndicator.innerHTML = `
              <span class="brikoulchi-typing-text">AI is thinking</span>
              <div class="brikoulchi-typing-dots">
                <div class="brikoulchi-typing-dot"></div>
                <div class="brikoulchi-typing-dot"></div>
                <div class="brikoulchi-typing-dot"></div>
              </div>
            `;
            
            contentDiv.appendChild(avatarDiv);
            contentDiv.appendChild(typingIndicator);
            typingDiv.appendChild(contentDiv);
            
            this.messagesContainer.appendChild(typingDiv);
            this.scrollToBottom();
            this.updateSendButton();
          }

          hideTyping() {
            this.isTyping = false;
            const typingIndicator = document.getElementById('typing-indicator');
            if (typingIndicator) {
              typingIndicator.remove();
            }
            this.updateSendButton();
          }

          async sendMessage() {
            const message = this.chatInput.value.trim();
            if (!message || this.isTyping) return;

            this.chatInput.value = '';
            this.adjustTextareaHeight();
            this.updateSendButton();
            this.addMessage(message, true);
            this.showTyping();

            try {
              const response = await this.callPuterAI(message);
              this.hideTyping();
              this.addMessage(response);
            } catch (error) {
              console.error('Error calling Puter AI:', error);
              this.hideTyping();
              this.addMessage("I apologize, but I'm experiencing technical difficulties. Please try again in a moment, or feel free to contact our support team directly.");
            }
          }

          async callPuterAI(message) {
            try {
              if (!window.puter) {
                throw new Error('Puter.js not loaded');
              }

              const systemPrompt = `
                    You are **Brikoulchi AI**, the intelligent assistant of the Brikoulchi platform ‚Äî a trusted place where people can **find local service providers** or **register as providers** to offer their skills to the community.

                    üü£ **Your Personality**
                    - Professional, friendly, approachable
                    - Knowledgeable about local services, categories, and how Brikoulchi works
                    - Helpful, supportive, and solution-oriented
                    - Clear, concise, and easy to understand

                    üü£ **Your Role**
                    - Guide users (both service seekers and providers) on how to use the Brikoulchi platform
                    - Help users explore service categories, subcategories, and specific service types
                    - Assist with navigation between pages (e.g., Home, Services, Sign Up, My Services)
                    - Explain how to register, manage accounts, and use platform features like chat
                    - Suggest appropriate service categories or subcategories based on user needs

                    üü£ **Platform Structure**
                    ‚úÖ **Pages (No Auth User)**:
                    - *Home*: Introduction to Brikoulchi‚Äôs mission and features
                    - *Services*: Browse all service categories and subcategories
                    - *Login*: For existing providers/users to sign in
                    - *Sign Up*: For new users or providers to register

                    ‚úÖ **Pages (Authenticated User)**:
                    - *Home*: Dashboard overview
                    - *Services*: Full directory of available services
                    - *Account*: Manage personal info, settings
                    - *My Services*: View, edit, or manage services offered
                    - *Chat*: Communicate with service seekers or providers
                    - *Logout*: Sign out of the platform

                    üü£ **Service Categories**
                    Brikoulchi AI is familiar with the following main categories and their subcategories:
                    - **Home Services**: Plumbing (Pipe Repair, Leak Fixing, etc.), Electrical (Wiring, Lights...), HVAC, Carpentry, Painting
                    - **Cleaning Services**: House Cleaning (Deep, Move-Out...), Carpet Cleaning, Window Cleaning, Commercial Cleaning
                    - **Automotive Services**: Car Repair (Brakes, Oil Change...), Car Wash, Tire Services, Auto Body Repair
                    - **Personal Care**: Hairdressing, Nail Services, Massage Therapy, Skincare
                    - **Professional Services**: Legal, Accounting, Consulting, Translation
                    - **Education and Training**: Tutoring, Music Lessons, Fitness, Cooking Classes
                    - **Event Services**: Planning, Catering, Photography, DJ Services
                    - **Tech Services**: IT Support, Web Development, Graphic Design, Cybersecurity
                    - **Landscaping and Gardening**: Lawn Care, Tree Services, Garden Design
                    - **Health and Wellness**: Nutrition Counseling, Physical Therapy, Mental Health Counseling
                    - **Pet Services**: Pet Grooming, Pet Sitting, Veterinary Services
                    - **Moving and Storage**: Moving, Packing, Storage
                    - **Childcare**: Babysitting, Daycare, Nanny Services

                    üü£ **Guidelines**
                    - Always provide clear, relevant guidance based on user intent
                    - If unsure about something, acknowledge it and offer to connect the user with human support
                    - Use professional tone, but stay approachable and helpful
                    - Use phrases like: *‚ÄúHere‚Äôs how to find a provider for X‚Äù*, *‚ÄúYou can list your service under Y‚Äù*, *‚ÄúGo to My Services to manage your listings‚Äù*
                    - Use emojis sparingly for clarity (e.g., üîç, ‚úÖ, üí°)

                    üü£ **Common Use Examples**
                    - ‚ÄúYou can browse *Home Services > Plumbing* to find help with leak fixing or pipe repair.‚Äù
                    - ‚ÄúTo become a provider, go to *Sign Up* and select the service category you want to offer.‚Äù
                    - ‚ÄúIf you‚Äôre already a provider, click on *My Services* to edit or update your listings.‚Äù
                    - ‚ÄúThe *Chat* section lets you talk directly with service seekers or providers.‚Äù
                    - ‚ÄúLooking for event help? Check *Event Services > Catering* or *Photography*.‚Äù

                    üü£ **Key Phrases**
                    - *local service providers*
                    - *trusted help near you*
                    - *list your service and connect with customers*
                    - *fast, easy, and reliable bookings*
                    - *manage your services through your dashboard*
              `;

              const response = await puter.ai.chat([
                { role: "system", content: systemPrompt },
                { role: "user", content: message }
              ]);

              return response.message?.content || "I'm sorry, I couldn't process that request properly. Could you please try rephrasing your question?";
            } catch (error) {
              console.error('Puter AI Error:', error);
              
              const fallbackResponses = {
                greeting: "Hello! üëã I'm Brikoulchi AI, your intelligent assistant. I'm here to help you navigate our platform and answer any questions you might have. What can I assist you with today?",
                help: "I'm here to help! ü§ñ I can assist you with:\n\n‚Ä¢ Understanding Brikoulchi services\n‚Ä¢ Platform navigation and features\n‚Ä¢ Technical questions\n‚Ä¢ General inquiries\n\nWhat specific area would you like help with?",
                services: "Brikoulchi offers a comprehensive suite of digital solutions designed to empower your business. While I'd love to give you specific details, I recommend exploring our services section or speaking with our team for the most current information. Is there a particular type of service you're interested in?",
                contact: "You can reach our support team through the contact section on our website, or I can help you with general questions right here! What would you prefer?",
                default: "That's an interesting question! ü§î While I'd like to help, I want to make sure I give you accurate information. Could you provide a bit more context, or would you like me to connect you with our human support team who can give you detailed assistance?"
              };

              const lowerMessage = message.toLowerCase();
              
              if (lowerMessage.includes('hello') || lowerMessage.includes('hi') || lowerMessage.includes('hey') || lowerMessage.includes('good')) {
                return fallbackResponses.greeting;
              } else if (lowerMessage.includes('help') || lowerMessage.includes('support') || lowerMessage.includes('assist')) {
                return fallbackResponses.help;
              } else if (lowerMessage.includes('service') || lowerMessage.includes('what') || lowerMessage.includes('offer')) {
                return fallbackResponses.services;
              } else if (lowerMessage.includes('contact') || lowerMessage.includes('speak') || lowerMessage.includes('talk')) {
                return fallbackResponses.contact;
              } else {
                return fallbackResponses.default;
              }
            }
          }

          addWelcomeMessage() {
            const welcomeDiv = document.createElement('div');
            welcomeDiv.className = 'brikoulchi-welcome-message';
            welcomeDiv.innerHTML = `
              <h4 class="brikoulchi-welcome-title">Welcome to Brikoulchi AI! üöÄ</h4>
              <p class="brikoulchi-welcome-subtitle">I'm your intelligent assistant, ready to help you explore our platform and answer your questions.</p>
            `;
            
            this.messagesContainer.appendChild(welcomeDiv);
            
            setTimeout(() => {
              this.addMessage("Hi there! I'm here to help you with anything related to Brikoulchi. Whether you need information about our services, have technical questions, or just want to explore what we offer, feel free to ask! üòä");
            }, 800);
          }

          scrollToBottom() {
            setTimeout(() => {
              this.messagesContainer.scrollTop = this.messagesContainer.scrollHeight;
            }, 100);
          }
        }

        document.addEventListener('DOMContentLoaded', () => {
          new BrikoulchiAIChatbot();
        });

        document.addEventListener('visibilitychange', () => {
          if (!document.hidden) {
            const chatbot = document.querySelector('.brikoulchi-chatbot');
            if (chatbot) {
              chatbot.style.display = 'block';
            }
          }
        });
      })();
    </script>
</body>
</html>
